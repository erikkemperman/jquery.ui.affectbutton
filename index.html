<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no, initial-scale=1"> 


  <!-- Use CDN versions of 3rd party resources to avoid clutter in our repository -->
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  
  
  <!-- Include the affectbutton widget -->
  <script src="js/jquery.ui.affectbutton.min.js"></script>
  
  
  <!-- Register document ready callback -->
  <script>
    jQuery( function( $ ) {
      
      var element = $( '#affectbutton' );
      
      // Instantiate the affectbutton widget
      element.affectbutton( {
        // overriding options would go here  
      } )
      
      // Listen for changes at the widget ...
      .on( 'affectchanged',
          function( event, affect ) {
            // ... so we can update the number box of each component.
            $.each( affect, function( component, value ) {
              $( '#' + component ).val( value );
            } );
          } );
  
      // Conversely, listen for changes at the number boxes ...
      $( '#pleasure, #arousal, #dominance' ).each( function() {
        var $this = $( this );
        $this.on( 'input', function() {
          var value = Number.parseFloat( $this.val() );
          if ( ! Number.isNaN( value ) ) {
            // ... so we can update the widget accordingly.
            element.affectbutton( 'affect', this.id, value );
          }
        } )
        
        // Component values are clipped to [-1, 1] automatically before they're applied
        // to the widget, but we'll want to reflect that in the number boxes as well:
        .on( 'change', function() {
          var value = $this.val();
          if ( value < -1 ) {
            $this.val( -1 );
          } else if ( value > 1 ) {
            $this.val( 1 );
          }
        } );
      } );
    } );
  </script>
  
  <!-- Let's not let extensive styling get in the way of what we actually want to demonstrate -->
  <style>
  div[data-role="content"] {
    max-width: 600px;
    border: 0;
    padding: 10;
    margin: 0 auto;
  }
  .affectcontainer {
    border: 0;
    padding: 0;
    margin: 0 auto;
    width: 300px;
  }
  </style>
  
</head>



<body>

  <div id="page" data-role="page">

    <div data-role="content">
    
      <p>
        The <b>AffectButton</b> is a widget to record and/or display emotional state,
        in terms of three scalar values according to the so-called Pleasure-Arousal-Dominance
        <a href="http://en.wikipedia.org/wiki/PAD_emotional_state_model">model</a>. 
      <p>
      
      <h2>Demo</h2>
      
      <p>
        Provided you are using a sufficiently modern browser, you will see a yellow face
        drawn below this paragraph. Drag your finger or your cursor across the canvas until
        the face expresses your mood and examine the P/A/D components in the number boxes
        underneath.
      </p>
      
      <div class="affectcontainer">
        
        <canvas id="affectbutton" width="300px" height="300px"></canvas>
        
        <fieldset data-role="fieldcontain">
	        <label for="pleasure">P</label>
	        <input id="pleasure" type="number" value="0" min="-1" max="1" step="0.05" />
	        
	        <label for="arousal">A</label>
	        <input id="arousal" type="number" value="0" min="-1" max="1" step="0.05" />
	        
	        <label for="dominance">D</label>
	        <input id="dominance" type="number" value="0" min="-1" max="1" step="0.05" />
        </fieldset>
        
      </div>
      
      <p>
        Conversely, you can also enter P/A/D components into the number boxes to make the
        facial expression change accordingly -- all values range over [-1, 1].
      </p>
      
      <p>
        The attentive reader will have noticed that the canvas is 2-dimensional while there are
        3 number boxes. And sure enough, there are lots of P/A/D triplets that you cannot "reach"
        via input at the canvas.
      </p>
      
      <p>  
        The important thing to note here is that:<br />
        - Pleasure corresponds to the horizontal axis of the canvas;<br />
        - Dominance corresponds to the vertical axis;<br />
        - Arousal is computed as a function of distance
         to the center of the canvas.</br>
        I cannot speak to the merits of this restriction, but surveys suggest that users still
        feel the widget is sufficiently expressive.
      </p>
      
      <h2>Usage</h2>
      
      <p>
        This page uses jQueryMobile, but the widget itself is plain jQuery/UI. Please note,
        however, that the interaction will vary: if jQueryMobile is detected, the widget
        expects the user to drag her finger or cursor across the canvas; otherwise,
        the user is expected to simply point and click.
        To force one mode or the other, override the <code>drag</code> option (Boolean).
      </p>
      
      <p>
        You can inspect the current page's source to see how the widget is initialized, how
        to attach change listeners to it, and how to set P/A/D components explicitly. The
        javascript code is available in <a rel="external" href="js/jquery.ui.affectbutton.js">verbose</a> and
        <a rel="external" href="js/jquery.ui.affectbutton.min.js">minified</a> versions.
      </p>
      
      <p>
        Alternatively, you're more than welcome to peruse the source
        <a href="http://github.com/radharing/affectbutton">repository</a>, of course.
      </p>
      
      <h2>Requirements</h2>
      
      <p>
        Obviously, we require that the browser supports JavaScript and has it enabled for
        the domain at hand. Furthermore, the widget is rendered in a <code>canvas</code>
        element. You should not have any compatibility issues unless you use really outdated
        versions of jQuery/UI.
      </p>
      
      <h2>About</h2>
      
      <p>
        The widget is a re-implementation of Joost Broeken's original Java version. Please refer
        to his <a href="http://mmi.tudelft.nl/~joostb/#AffectButton">homepage</a> for more
        information about usage... Basically, you're free to use it in research or education
        context -- but commercial application will require his explicit blessing.
      </p>
      
    </div>

  </div>
</body>

</html>
